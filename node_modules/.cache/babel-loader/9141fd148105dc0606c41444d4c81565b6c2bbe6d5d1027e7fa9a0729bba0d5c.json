{"ast":null,"code":"import axios from'axios';import React from'react';import{useState}from'react';import{loginContext}from'./loginContext';import{jsx as _jsx}from\"react/jsx-runtime\";function UserLoginStore(_ref){let{children}=_ref;const[currentUser,setCurrentUser]=useState({});const[loginErr,setLoginErr]=useState(\"\");const[userLoginStatus,setUserLoginStatus]=useState(false);const[scheme,setScheme]=useState([]);//function to make user login request\nconst loginUser=userCredObj=>{axios.post(\"http://localhost:3500/user-api/login\",userCredObj).then(response=>{if(response.data.message==='Success'){//save token to local storage\nconsole.log(response);localStorage.setItem(\"token\",response.data.token);setCurrentUser({...response.data.user});setLoginErr(\"\");setUserLoginStatus(true);}else{setLoginErr(response.data.message);}}).catch(err=>{console.log(\"err in user login\",err);setLoginErr(err.message);});};const logoutUser=()=>{localStorage.clear();setUserLoginStatus(false);currentUser.userType=\"\";};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(loginContext.Provider,{value:[currentUser,loginErr,userLoginStatus,loginUser,logoutUser,setScheme,scheme],children:children})});}export default UserLoginStore;","map":{"version":3,"names":["axios","React","useState","loginContext","jsx","_jsx","UserLoginStore","_ref","children","currentUser","setCurrentUser","loginErr","setLoginErr","userLoginStatus","setUserLoginStatus","scheme","setScheme","loginUser","userCredObj","post","then","response","data","message","console","log","localStorage","setItem","token","user","catch","err","logoutUser","clear","userType","Provider","value"],"sources":["C:/Users/Vivek/canteen1/src/contexts/UserLoginStrore.js"],"sourcesContent":["import axios from 'axios';\r\nimport React from 'react'\r\nimport { useState } from 'react'\r\nimport { loginContext } from './loginContext';\r\n\r\nfunction UserLoginStore({children}) {\r\n    \r\n    const [currentUser,setCurrentUser]=useState({});\r\n    const [loginErr,setLoginErr]=useState(\"\")\r\n    const [userLoginStatus,setUserLoginStatus]=useState(false)\r\n    const [scheme,setScheme]=useState([]) \r\n    //function to make user login request\r\n    const loginUser=(userCredObj)=>{\r\n        \r\n       axios.post(\"http://localhost:3500/user-api/login\",userCredObj)\r\n       .then((response)=>{\r\n            if(response.data.message==='Success'){\r\n                //save token to local storage\r\n                console.log(response)\r\n                localStorage.setItem(\"token\",response.data.token)\r\n\r\n\r\n                setCurrentUser({...response.data.user});\r\n                setLoginErr(\"\");\r\n                setUserLoginStatus(true)   \r\n            }\r\n            else{\r\n                 setLoginErr(response.data.message)\r\n            }\r\n       })\r\n       .catch(err=>{\r\n        console.log(\"err in user login\",err)\r\n        setLoginErr(err.message)\r\n       }) \r\n    }\r\n    \r\n    const logoutUser=()=>{\r\n        localStorage.clear()\r\n        setUserLoginStatus(false)\r\n        currentUser.userType=\"\"\r\n    }\r\n\r\n    return (\r\n    <div> \r\n        <loginContext.Provider value={[currentUser,loginErr,userLoginStatus,loginUser,logoutUser ,setScheme,scheme]}>\r\n            {children}\r\n        </loginContext.Provider>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserLoginStore"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,YAAY,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9C,QAAS,CAAAC,cAAcA,CAAAC,IAAA,CAAa,IAAZ,CAACC,QAAQ,CAAC,CAAAD,IAAA,CAE9B,KAAM,CAACE,WAAW,CAACC,cAAc,CAAC,CAACR,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC/C,KAAM,CAACS,QAAQ,CAACC,WAAW,CAAC,CAACV,QAAQ,CAAC,EAAE,CAAC,CACzC,KAAM,CAACW,eAAe,CAACC,kBAAkB,CAAC,CAACZ,QAAQ,CAAC,KAAK,CAAC,CAC1D,KAAM,CAACa,MAAM,CAACC,SAAS,CAAC,CAACd,QAAQ,CAAC,EAAE,CAAC,CACrC;AACA,KAAM,CAAAe,SAAS,CAAEC,WAAW,EAAG,CAE5BlB,KAAK,CAACmB,IAAI,CAAC,sCAAsC,CAACD,WAAW,CAAC,CAC7DE,IAAI,CAAEC,QAAQ,EAAG,CACb,GAAGA,QAAQ,CAACC,IAAI,CAACC,OAAO,GAAG,SAAS,CAAC,CACjC;AACAC,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC,CACrBK,YAAY,CAACC,OAAO,CAAC,OAAO,CAACN,QAAQ,CAACC,IAAI,CAACM,KAAK,CAAC,CAGjDlB,cAAc,CAAC,CAAC,GAAGW,QAAQ,CAACC,IAAI,CAACO,IAAI,CAAC,CAAC,CACvCjB,WAAW,CAAC,EAAE,CAAC,CACfE,kBAAkB,CAAC,IAAI,CAAC,CAC5B,CAAC,IACG,CACCF,WAAW,CAACS,QAAQ,CAACC,IAAI,CAACC,OAAO,CAAC,CACvC,CACL,CAAC,CAAC,CACDO,KAAK,CAACC,GAAG,EAAE,CACXP,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAACM,GAAG,CAAC,CACpCnB,WAAW,CAACmB,GAAG,CAACR,OAAO,CAAC,CACzB,CAAC,CAAC,CACL,CAAC,CAED,KAAM,CAAAS,UAAU,CAACA,CAAA,GAAI,CACjBN,YAAY,CAACO,KAAK,CAAC,CAAC,CACpBnB,kBAAkB,CAAC,KAAK,CAAC,CACzBL,WAAW,CAACyB,QAAQ,CAAC,EAAE,CAC3B,CAAC,CAED,mBACA7B,IAAA,QAAAG,QAAA,cACIH,IAAA,CAACF,YAAY,CAACgC,QAAQ,EAACC,KAAK,CAAE,CAAC3B,WAAW,CAACE,QAAQ,CAACE,eAAe,CAACI,SAAS,CAACe,UAAU,CAAEhB,SAAS,CAACD,MAAM,CAAE,CAAAP,QAAA,CACvGA,QAAQ,CACU,CAAC,CACvB,CAAC,CAEV,CAEA,cAAe,CAAAF,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}